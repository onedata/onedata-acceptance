global:
  # TODO: VFS-4942 Find a way to eliminate necessity for region and tld values
  # to make deployment cluster independent
   region: cluster
   tld: local
   imagePullPolicy: IfNotPresent
   keycloakInstance:
     realmId: onedata
     idpName: rhea
   alpha: true


lumaJobEnabled: true


all_space_privileges: &all_space_privileges
  - space_view
  - space_update
  - space_delete
  - space_view_privileges
  - space_set_privileges
  - space_read_data
  - space_write_data
  - space_manage_shares
  - space_manage_indices
  - space_query_indices
  - space_view_statistics
  - space_view_transfers
  - space_schedule_replication
  - space_cancel_replication
  - space_schedule_eviction
  - space_cancel_eviction
  - space_add_user
  - space_remove_user
  - space_add_group
  - space_remove_group
  - space_add_provider
  - space_remove_provider


all_group_privileges: &all_group_privileges
  - group_view
  - group_update
  - group_delete
  - group_view_privileges
  - group_set_privileges
  - group_add_user
  - group_remove_user
  - group_add_parent
  - group_leave_parent
  - group_add_child
  - group_remove_child
  - group_add_space
  - group_leave_space
  - group_create_handle_service
  - group_leave_handle_service
  - group_create_handle
  - group_leave_handle


alpha_group: &group_alpha
  name: alpha
  idps:
    onezone:
      enabled: true
  luma:
    - provider: oneprovider-1
      storages:
        - name: volume-data-sync-rw-luma-test
          gid: 42001
        - name: posix
          gid: 42001


users: &all_users
  - &user_rob
    name: rob
    idps:
      onepanel:
        mode: rest
        type: regular
        enabled: true
    password: password
    email: joe@example.com
    luma:
      - provider: oneprovider-1
        storages:
          - name: posix
            uid: 40001
            gid: 42001
          - name: volume-data-sync-rw-luma-test
            uid: 40001
            gid: 42001
    groups: []
  - &user_karen
    name: karen
    password: password
    email: karen@example.com
    idps:
      onepanel:
        mode: rest
        type: regular
        enabled: true
    oneclient: []
    groups: []
# keycloak users
  - &user_pier
    name: pier
    firstName: Pier
    lastName: Segal
    idps:
      keycloak:
        enabled: true
        onezoneLogin: true
        mode: duringCrossSupportJob
    password: password
    email: pier@example.com
    oneclient: []
    luma:
      - provider: oneprovider-1
        storages:
          - name: posix
            uid: 50001
            gid: 51001
    groups:
      - group: *group_alpha
        privileges: *all_group_privileges
  - &user_marie
    name: marie
    firstName: Marie
    lastName: Page
    idps:
      keycloak:
        enabled: true
        onezoneLogin: false
        mode: duringCrossSupportJob
    password: password
    email: marie@example.com
    oneclient: []
    luma:
      - provider: oneprovider-1
        storages:
        - name: posix
          uid: 50002
          gid: 51002


groups: &all_groups
  - *group_alpha
  - &group_beta
    name: beta
    idps:
      onezone:
        enabled: true
    posix:
      gid: 50002
  - &group_gamma
    name: gamma
    idps:
      onezone:
        enabled: true
        mode: rest
    posix:
      gid: 50003
  - &group_delta
    name: delta
    idps:
      onezone:
        enabled: true
        mode: rest
    posix:
      gid: 50004
  - &group_trois
    name: trois
    idps:
      keycloak:
        users: [ *user_marie, *user_pier ]
        enabled: true
        mode: duringCrossSupportJob
    posix:
      gid: 60003


groups_graph:
  - parent: *group_alpha
    privileges: *all_group_privileges
    children: [ *group_trois ]


spaces:
  # Luma enabled spaces
  - name: "krk-pl-par-c"
    user: *user_rob
    users:
      - user: *user_karen
        privileges: *all_space_privileges
    groups:
      - group: *group_alpha
        privileges: *all_space_privileges
      - group: *group_beta
        privileges: *all_space_privileges
      - group: *group_gamma
        privileges: *all_space_privileges
      - group: *group_delta
        privileges: *all_space_privileges
    supports:
      - provider: "oneprovider-1"
        storage_name: "posix"
        size: '1073741824'
        luma:
          uid: 40001
          gid: 42001
      - provider: "oneprovider-2"
        storage_name: "ceph"
        size: '1073741824'
  - name: "krk-plirw-par-c"
    user: *user_rob
    users:
      - user: *user_karen
        privileges: *all_space_privileges
    groups:
      - group: *group_alpha
        privileges: *all_space_privileges
      - group: *group_beta
        privileges: *all_space_privileges
      - group: *group_gamma
        privileges: *all_space_privileges
      - group: *group_delta
        privileges: *all_space_privileges
    supports:
      - provider: "oneprovider-1"
        storage_name: "volume-data-sync-rw-luma-test"
        size: '1073741824'
        mountInRoot: true
        import:
          strategy: "simple_scan"
        update:
          strategy: "simple_scan"
          deleteEnable: true
        luma:
          uid: 40001
          gid: 42001
      - provider: "oneprovider-2"
        storage_name: "ceph"
        size: '1073741824'
