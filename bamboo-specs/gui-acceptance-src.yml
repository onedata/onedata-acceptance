version: 2
plan:
  project-key: VFS
  key: GAOT
  name: gui acceptance src
  description: GUI acceptance tests using environment deployed from sources
# Uncomment and set the following variables to override docker
# images to be used
# variables:
# OC_IMAGE_OVERRIDE: ""
# OP_IMAGE_OVERRIDE: ""
# OZ_IMAGE_OVERRIDE: ""
repositories:
  - onedata-acceptance:
      scope: global
branches:
  create: manually
  delete:
    after-deleted-days: never
    after-inactive-days: 30
  link-to-jira: true
notifications:
  - events:
      - plan-failed
    recipients:
      - users:
          - plgjliput
labels: []
triggers: []
dependencies:
  require-all-stages-passing: true
  enabled-for-branches: true
  block-strategy: none
  plans: []
other:
  concurrent-build-plugin: "3"
  all-other-apps:
    custom:
      com.atlassian.bamboo.plugin.hungbuildkiller:
        stopped.enabled: "true"
        add_comment_when_hung.enabled: "true"
      buildExpiryConfig:
        period: weeks
        expiryTypeBuildLog: "true"
        enabled: "true"
        expiryTypeArtifact: "true"
        duration: "1"

stages:
  - Acceptance Test:
      manual: false
      final: false
      jobs:
        - _Codetag Tracker
        - Metadata
        - Multiprovider basic
        - Multiprovider multiuser
        - Multiprovider QoS
        - Multiprovider QoS storage
        - Onepanel basic
        - Onepanel ceph spaces
        - Onepanel deployment basic
        - Onepanel deployment ceph
        - Onepanel login
        - Onepanel members
        - Onepanel two hosts deployment
        - Oneprovider ACL basic
        - Oneprovider ACL directories privileges
        - Oneprovider ACL directories privileges create
        - Oneprovider ACL directories privileges metadata
        - Oneprovider ACL directories privileges remove
        - Oneprovider ACL files
        - Oneprovider ACL files metadata
        - Oneprovider ACL remove file
        - Oneprovider ACL subdirectories
        - Oneprovider ACL subdirectories remove
        - Oneprovider ACL subfiles
        - Oneprovider ACL subjects
        - Oneprovider archives
        - Oneprovider archives incremental and nested
        - Oneprovider archives recall
        - Oneprovider atm workflow execution
        - Oneprovider data tab
        - Oneprovider data tab files
        - Oneprovider datasets
        - Oneprovider datasets privileges
        - Oneprovider hardlinks
        - Oneprovider symlinks
        - Oneprovider upload
        - Onezone automations
        - Onezone basic
        - Onezone data discovery
        - Onezone data discovery helpers
        - Onezone data discovery querying
        - Onezone groups basic
        - Onezone groups multiuser
        - Onezone groups multiuser single group
        - Onezone harvesters basic
        - Onezone harvesters effective privileges
        - Onezone harvesters index
        - Onezone harvesters index metadata
        - Onezone harvesters memberships privileges
        - Onezone harvesters privileges add and remove
        - Onezone invite tokens
        - Onezone invite tokens with caveats
        - Onezone invite tokens with consumer caveats
        - Onezone providers basic
        - Onezone spaces basic
        - Onezone spaces memberships privileges
        - Onezone spaces memberships privileges data
        - Onezone spaces multiuser
        - Onezone tokens
        - Onezone tokens delete
        - POSIX
        - POSIX multiuser
        - Public shares
        - QoS basic
        - QoS storage
        - Shares basic
        - Shares handle service
        - Storage sync
        - Storage sync charts
        - Transfers cancel
        - Transfers directories
        - Transfers files
        - Transfers multi browser

_Codetag Tracker:
  key: CDTR
  other: &common-opts
    clean-working-dir: true
    all-other-apps:
      custom:
        auto: {}
        clover:
          useLocalLicenseKey: "true"
        buildHangingConfig.enabled: "false"
  tasks:
    - checkout: &checkout-default-repository
        path: onedata-acceptance
        force-clean-build: "true"
        description: Checkout Default Repository
    - script: &init-submodules
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - |-
            git remote set-url origin ${bamboo.repository.git.repositoryUrl}
            git remote -v
            make submodules
        working-dir: onedata-acceptance
        description: Init submodules
    - script:
        interpreter: BINSH_OR_CMDEXE
        working-dir: onedata-acceptance
        scripts:
          - make codetag-tracker BRANCH=${bamboo.planRepository.branchName}
        description: Codetag Tracker
  requirements: []
  artifact-subscriptions: []

Metadata: &acceptance-tests-in-chrome-job
  key: CPT
  other: *common-opts
  tasks:
    - script: &clear-env
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - curl ${bamboo.OnedataFinalTasksURL} | bash -
        description: Clear env
    - script: &restart-minikube
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - sudo ${HOME}/restart_minikube.sh
        description: Restart minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: &download-artifacts
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - one_env/onenv pull_artifacts --hostname ${bamboo.artifactRepoHostname} --port ${bamboo.artifactRepoPort} branchConfig.yaml
        working-dir: onedata-acceptance
        description: Download artifacts
    - script: &run-selenium-tests
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - make SUITE=test_metadata test_gui_src
        working-dir: onedata-acceptance
        description: Run Selenium tests
  final-tasks:
    - test-parser:
        type: junit
        ignore-time: "false"
        test-results: onedata-acceptance/test-reports/results*.xml
        description: Parse test results
    - script:
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - |-
            cp onedata-acceptance/test-reports/*.xml onedata-acceptance/tests/gui/logs
            cp onedata-acceptance/one_env/sources_info.yaml onedata-acceptance/tests/gui/logs
            mv onedata-acceptance/tests/gui/logs/report.* onedata-acceptance/tests/gui/logs/gui_report
            mv onedata-acceptance/tests/gui/logs/gui_report/images.yaml onedata-acceptance/tests/gui/logs
        description: Pack logs
    - script:
        interpreter: BINSH_OR_CMDEXE
        scripts:
          - curl ${bamboo.OnedataFinalTasksURL} | bash -
        working-dir: onedata-acceptance
        description: Clear env and working dir
  artifacts:
    - name: report
      location: onedata-acceptance/tests/gui/logs/
      pattern: "**/*.*"
      shared: false
      required: false
  requirements:
    - minikube
  artifact-subscriptions: []

Multiprovider basic:
  <<: *acceptance-tests-in-chrome-job
  key: CMBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_basic test_gui_src

Multiprovider multiuser:
  <<: *acceptance-tests-in-chrome-job
  key: CMMT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_multiuser test_gui_src

Multiprovider QoS:
  <<: *acceptance-tests-in-chrome-job
  key: CMQT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_qos test_gui_src

Multiprovider QoS storage:
  <<: *acceptance-tests-in-chrome-job
  key: CMQS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_qos_storage test_gui_src

Onepanel basic:
  <<: *acceptance-tests-in-chrome-job
  key: COBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_basic test_gui_src

Onepanel ceph spaces:
  <<: *acceptance-tests-in-chrome-job
  key: COCS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_ceph_spaces ENV_FILE=1oz_1op_not_deployed_embedded_ceph test_gui_src

Onepanel deployment basic:
  <<: *acceptance-tests-in-chrome-job
  key: CODBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_deployment_basic ENV_FILE=1oz_1op_not_deployed test_gui_src

Onepanel deployment ceph:
  <<: *acceptance-tests-in-chrome-job
  key: CODC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_deployment_ceph ENV_FILE=1oz_1op_not_deployed_embedded_ceph test_gui_src

Onepanel login:
  <<: *acceptance-tests-in-chrome-job
  key: COLT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_login test_gui_src

Onepanel members:
  <<: *acceptance-tests-in-chrome-job
  key: COMT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_members test_gui_src

Onepanel two hosts deployment:
  <<: *acceptance-tests-in-chrome-job
  key: COTHDT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onepanel_deployment_with_2_hosts ENV_FILE=1oz_1op_not_deployed_2_nodes test_gui_src

Oneprovider ACL basic:
  <<: *acceptance-tests-in-chrome-job
  key: COAB
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_basic test_gui_src

Oneprovider ACL directories privileges:
  <<: *acceptance-tests-in-chrome-job
  key: COADP
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_dir_privileges test_gui_src

Oneprovider ACL directories privileges create:
  <<: *acceptance-tests-in-chrome-job
  key: COADPC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_dir_privileges_create test_gui_src

Oneprovider ACL directories privileges metadata:
  <<: *acceptance-tests-in-chrome-job
  key: COADPM
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_dir_privileges_metadata test_gui_src

Oneprovider ACL directories privileges remove:
  <<: *acceptance-tests-in-chrome-job
  key: COADPR
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_dir_privileges_remove test_gui_src

Oneprovider ACL files:
  <<: *acceptance-tests-in-chrome-job
  key: COAF
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_files test_gui_src

Oneprovider ACL files metadata:
  <<: *acceptance-tests-in-chrome-job
  key: COAFM2
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_files_metadata test_gui_src

Oneprovider ACL remove file:
  <<: *acceptance-tests-in-chrome-job
  key: COARF
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_remove_file test_gui_src

Oneprovider ACL subdirectories:
  <<: *acceptance-tests-in-chrome-job
  key: COAS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_subdir test_gui_src

Oneprovider ACL subdirectories remove:
  <<: *acceptance-tests-in-chrome-job
  key: COASD
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_subdir_remove test_gui_src

Oneprovider ACL subfiles:
  <<: *acceptance-tests-in-chrome-job
  key: COASF
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_subfile test_gui_src

Oneprovider ACL subjects:
  <<: *acceptance-tests-in-chrome-job
  key: COABS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_acl_subjects test_gui_src

Oneprovider archives:
  <<: *acceptance-tests-in-chrome-job
  key: COAT2
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_archives test_gui_src

Oneprovider archives incremental and nested:
  <<: *acceptance-tests-in-chrome-job
  key: COAIN
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_archives_incremental_and_nested test_gui_src

Oneprovider archives recall:
  <<: *acceptance-tests-in-chrome-job
  key: COARL
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_archives_recall ENV_FILE=1oz_2op_slow_file_operations test_gui_src

Oneprovider atm workflow execution:
  <<: *acceptance-tests-in-chrome-job
  key: COAWET
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_openfaas SUITE=test_oneprovider_atm_workflows_execution test_gui_src

Oneprovider data tab:
  <<: *acceptance-tests-in-chrome-job
  key: CODTT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_data_tab test_gui_src

Oneprovider data tab files:
  <<: *acceptance-tests-in-chrome-job
  key: CODTF
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_data_tab_files test_gui_src

Oneprovider datasets:
  <<: *acceptance-tests-in-chrome-job
  key: CODT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_datasets test_gui_src

Oneprovider datasets privileges:
  <<: *acceptance-tests-in-chrome-job
  key: CODP
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_datasets_privileges test_gui_src

Oneprovider hardlinks:
  <<: *acceptance-tests-in-chrome-job
  key: COH
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_hardlinks test_gui_src

Oneprovider symlinks:
  <<: *acceptance-tests-in-chrome-job
  key: COSL
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_symlinks test_gui_src

Oneprovider upload:
  <<: *acceptance-tests-in-chrome-job
  key: COUT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_upload test_gui_src

Onezone automations:
  <<: *acceptance-tests-in-chrome-job
  key: COAT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_automation test_gui_src

Onezone basic:
  <<: *acceptance-tests-in-chrome-job
  key: COBTT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_basic test_gui_src

Onezone data discovery:
  <<: *acceptance-tests-in-chrome-job
  key: CODDT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery test_gui_src

Onezone data discovery helpers:
  <<: *acceptance-tests-in-chrome-job
  key: CODDH
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery_helpers test_gui_src

Onezone data discovery querying:
  <<: *acceptance-tests-in-chrome-job
  key: CODDQ
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery_querying test_gui_src

Onezone groups basic:
  <<: *acceptance-tests-in-chrome-job
  key: COGBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_groups_basic test_gui_src

Onezone groups multiuser:
  <<: *acceptance-tests-in-chrome-job
  key: COGMUT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_groups_multiuser test_gui_src

Onezone groups multiuser single group:
  <<: *acceptance-tests-in-chrome-job
  key: COGMSG
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_groups_multiuser_single_group test_gui_src

Onezone harvesters basic:
  <<: *acceptance-tests-in-chrome-job
  key: COHBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_basic test_gui_src

Onezone harvesters effective privileges:
  <<: *acceptance-tests-in-chrome-job
  key: COHEP
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_effective_privileges test_gui_src

Onezone harvesters index:
  <<: *acceptance-tests-in-chrome-job
  key: COHI
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_index test_gui_src

Onezone harvesters index metadata:
  <<: *acceptance-tests-in-chrome-job
  key: COHIM
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_index_metadata test_gui_src

Onezone harvesters memberships privileges:
  <<: *acceptance-tests-in-chrome-job
  key: COHMP
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_memberships_privileges test_gui_src

Onezone harvesters privileges add and remove:
  <<: *acceptance-tests-in-chrome-job
  key: COHPAR
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_privileges_add_remove test_gui_src

Onezone invite tokens:
  <<: *acceptance-tests-in-chrome-job
  key: COIT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens test_gui_src

Onezone invite tokens with caveats:
  <<: *acceptance-tests-in-chrome-job
  key: COITWC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens_with_caveats test_gui_src

Onezone invite tokens with consumer caveats:
  <<: *acceptance-tests-in-chrome-job
  key: COITWCC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens_with_consumer_caveats test_gui_src

Onezone providers basic:
  <<: *acceptance-tests-in-chrome-job
  key: COPBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_providers_basic test_gui_src

Onezone spaces basic:
  <<: *acceptance-tests-in-chrome-job
  key: COSBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_spaces_basic test_gui_src

Onezone spaces memberships privileges:
  <<: *acceptance-tests-in-chrome-job
  key: COSMP
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_spaces_memberships_privileges test_gui_src

Onezone spaces memberships privileges data:
  <<: *acceptance-tests-in-chrome-job
  key: COSMPD
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_onezone_spaces_memberships_privileges_data test_gui_src

Onezone spaces multiuser:
  <<: *acceptance-tests-in-chrome-job
  key: COSMT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_spaces_multiuser test_gui_src

Onezone tokens:
  <<: *acceptance-tests-in-chrome-job
  key: COTT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_tokens test_gui_src

Onezone tokens delete:
  <<: *acceptance-tests-in-chrome-job
  key: COTD
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_tokens_delete test_gui_src

POSIX:
  <<: *acceptance-tests-in-chrome-job
  key: CMT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_posix test_gui_src

POSIX multiuser:
  <<: *acceptance-tests-in-chrome-job
  key: CPTM
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_posix_multiuser test_gui_src

Public shares:
  <<: *acceptance-tests-in-chrome-job
  key: CPST
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_public_shares test_gui_src

QoS basic:
  <<: *acceptance-tests-in-chrome-job
  key: CQB
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_qos_basic test_gui_src

QoS storage:
  <<: *acceptance-tests-in-chrome-job
  key: CQS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_2op_deployed SUITE=test_qos_storage test_gui_src

Shares basic:
  <<: *acceptance-tests-in-chrome-job
  key: CSBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_shares_basic test_gui_src

Shares handle service:
  <<: *acceptance-tests-in-chrome-job
  key: CSHS
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make ENV_FILE=1oz_1op_handle_proxy_mock SUITE=test_shares_handle_service test_gui_src

Storage sync:
  <<: *acceptance-tests-in-chrome-job
  key: CSST
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_storage_sync test_gui_src

Storage sync charts:
  <<: *acceptance-tests-in-chrome-job
  key: CSSC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_storage_sync_charts test_gui_src

Transfers cancel:
  <<: *acceptance-tests-in-chrome-job
  key: CTC
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_transfers_cancel ENV_FILE=1oz_2op_slow_deployed test_gui_src

Transfers directories:
  <<: *acceptance-tests-in-chrome-job
  key: CTD
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_transfers_directories ENV_FILE=1oz_2op_deployed test_gui_src

Transfers files:
  <<: *acceptance-tests-in-chrome-job
  key: CTF
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_transfers_files ENV_FILE=1oz_2op_deployed test_gui_src

Transfers multi browser:
  <<: *acceptance-tests-in-chrome-job
  key: CTMBT
  tasks:
    - script: *clear-env
    - script: *restart-minikube
    - checkout: *checkout-default-repository
    - script: *init-submodules
    - script: *download-artifacts
    - script:
        <<: *run-selenium-tests
        scripts:
          - make SUITE=test_oneprovider_transfers_multi ENV_FILE=1oz_2op_deployed test_gui_src

