version: 2
plan:
  project-key: VFS
  key: GAOT
  name: gui acceptance src
  description: GUI acceptance tests using environment deployed from sources
# Uncomment and set the following variables to override docker
# images to be used
# variables:
  # OC_IMAGE_OVERRIDE: null
  # OP_IMAGE_OVERRIDE: null
  # OZ_IMAGE_OVERRIDE: null
repositories:
- onedata-acceptance:
    scope: global
branches:
  create: manually
  delete:
    after-deleted-days: never
    after-inactive-days: 30
  link-to-jira: true
notifications:
- events:
  - plan-failed
  recipients:
  - users:
    - plgjliput
labels: []
triggers: []
dependencies:
  require-all-stages-passing: true
  enabled-for-branches: true
  block-strategy: none
  plans: []
other:
  concurrent-build-plugin: '3'
  all-other-apps:
    custom:
      com.atlassian.bamboo.plugin.hungbuildkiller:
        stopped.enabled: 'true'
        add_comment_when_hung.enabled: 'true'
      buildExpiryConfig:
        period: weeks
        expiryTypeBuildLog: 'true'
        enabled: 'true'
        expiryTypeArtifact: 'true'
        duration: '1'

stages:
- Acceptance Test:
    manual: false
    final: false
    jobs:
    - Chrome POSIX tests multiuser
    - Chrome onepanel deployment basic tests
    - Chrome oneprovider ACL subdirectories
    - Chrome onezone automations tests
    - Chrome qos basic
    - Chrome onezone harvesters basic tests
    - Chrome oneprovider ACL directories privileges create
    - Chrome oneprovider archives incremental and nested
    - Chrome oneprovider archives recall
    - Chrome oneprovider ACL files metadata
    - Chrome onezone providers basic tests
    - Chrome POSIX tests
    - Chrome oneprovider ACL directories privileges metadata
    - Chrome oneprovider ACL directories privileges remove
    - Chrome onezone spaces memberships privileges
    - Chrome oneprovider ACL remove file
    - Chrome oneprovider symlinks
    - Chrome transfers multi browser tests
    - Chrome onezone harversters privileges add and remove
    - Chrome onezone groups multiuser single group
    - Chrome onepanel basic tests
    - Chrome multiprovider basic tests
    - Chrome onezone invite tokens with caveats
    - Chrome transfers files
    - Chrome shares basic tests
    - Chrome onezone spaces multiuser tests
    - Chrome storage sync charts
    - Chrome onezone spaces memberships privileges data
    - Chrome oneprovider data tab tests
    - Chrome transfers directories
    - Chrome onezone basic tests
    - Chrome onezone data discovery helpers
    - Chrome storage sync tests
    - Chrome oneprovider hardlinks
    - Chrome onezone data discovery tests
    - Chrome oneprovider ACL subfiles
    - Chrome onepanel deployment ceph
    - Chrome oneprovider ACL subdirectories remove
    - Chrome oneprovider ACL subjects
    - Chrome onezone data discovery querying
    - Chrome oneprovider archives tests
    - Chrome onepanel ceph spaces
    - Chrome onezone tokens delete
    - Chrome onezone groups basic tests
    - Chrome onezone spaces basic tests
    - Chrome onepanel login tests
    - Chrome oneprovider datasets privileges
    - Chrome onezone tokens tests
    - Chrome onezone harvesters index
    - Chrome onezone harversters index metadata
    - Chrome onezone harvesters memberships privileges
    - Chrome onezone harvesters effective privileges
    - Chrome onepanel two hosts deployment tests
    - Chrome oneprovider upload tests
    - Chrome onezone invite tokens with consumer caveats
    - Chrome oneprovider datasets tests
    - Chrome onezone invite tokens
    - Chrome public shares tests
    - Chrome onezone groups multiuser tests
    - Chrome oneprovider ACL directories privileges
    - Chrome multiprovider QoS storage
    - Chrome oneprovider ACL basic
    - Chrome multiprovider QoS tests
    - Chrome QoS storage
    - Chrome metadata test
    - Chrome onepanel members tests
    - Chrome multiprovider multiuser tests
    - Chrome oneprovider ACL files
Chrome POSIX tests multiuser:
  key: CPTM
  other: &common-opts
    clean-working-dir: true
    all-other-apps:
      custom:
        auto: {}
        clover:
          useLocalLicenseKey: 'true'
        buildHangingConfig.enabled: 'false'
  tasks:
  - script: &clear-env
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - curl ${bamboo.OnedataFinalTasksURL} | bash -
      description: Clear env
  - script: &restart-minikube
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - sudo ${HOME}/restart_minikube.sh
      description: Restart minikube
  - checkout: &checkout
      path: onedata-acceptance
      force-clean-build: 'true'
      description: Checkout Default Repository
  - script: &init-submodules
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - |-
        git remote set-url origin ${bamboo.repository.git.repositoryUrl}
        git remote -v
        make submodules
      working-dir: onedata-acceptance
      description: Init submodules
  - script: &download-artifacts
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - one_env/onenv pull_artifacts --hostname ${bamboo.artifactRepoHostname} --port ${bamboo.artifactRepoPort} branchConfig.yaml
      working-dir: onedata-acceptance
      description: Download artifacts
  - script: &run-selenium-tests 
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - make SUITE=test_oneprovider_posix_multiuser BROWSER=Chrome TIMEOUT=600 test_gui_src
      working-dir: onedata-acceptance
      description: Run Selenium tests
  final-tasks:
  - test-parser: &parse-test-results
      type: junit
      ignore-time: 'false'
      test-results: onedata-acceptance/test-reports/results*.xml
      description: Parse test results
  - script: &pack-logs
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - |-
        cp onedata-acceptance/test-reports/*.xml onedata-acceptance/tests/gui/logs
        cp onedata-acceptance/one_env/sources_info.yaml onedata-acceptance/tests/gui/logs
        mv onedata-acceptance/tests/gui/logs/report.* onedata-acceptance/tests/gui/logs/gui_report
        mv onedata-acceptance/tests/gui/logs/gui_report/images.yaml onedata-acceptance/tests/gui/logs
      description: Pack logs
  - script: &clear-env-and-working-dir
      interpreter: BINSH_OR_CMDEXE
      scripts:
      - curl ${bamboo.OnedataFinalTasksURL} | bash -
      working-dir: onedata-acceptance
      description: Clear env and working dir
  artifacts: &artifacts
    - name: report
      location: onedata-acceptance/tests/gui/logs/
      pattern: '**/*.*'
      shared: false
      required: false
  requirements: &requirements
  - minikube
  artifact-subscriptions: []
Chrome onepanel deployment basic tests:
  key: CODBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_deployment_basic ENV_FILE=1oz_1op_not_deployed BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL subdirectories:
  key: COAS
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_subdir BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone automations tests:
  key: COAT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_automation BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome qos basic:
  key: CQB
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_qos_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harvesters basic tests:
  key: COHBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL directories privileges create:
  key: COADPC
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_dir_privileges_create BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider archives incremental and nested:
  key: COAIN
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_archives_incremental_and_nested BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider archives recall:
  key: COARL
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_archives_recall ENV_FILE=1oz_2op_slow_file_operations BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL files metadata:
  key: COAFM2
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_files_metadata BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone providers basic tests:
  key: COPBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_providers_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome POSIX tests:
  key: CPT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_posix BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL directories privileges metadata:
  key: COADPM
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_dir_privileges_metadata BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL directories privileges remove:
  key: COADPR
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_dir_privileges_remove BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone spaces memberships privileges:
  key: COSMP
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_spaces_memberships_privileges BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL remove file:
  key: COARF
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_files BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider symlinks:
  key: COSL
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_symlinks BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome transfers multi browser tests:
  key: CTMBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_transfers_multi ENV_FILE=1oz_2op_deployed BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harversters privileges add and remove:
  key: COHPAR
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_privileges_add_remove BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone groups multiuser single group:
  key: COGMSG
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_groups_multiuser_single_group BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel basic tests:
  key: COBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome multiprovider basic tests:
  key: CMBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone invite tokens with caveats:
  key: COITWC
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens_with_caveats BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome transfers files:
  key: CTF
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_transfers_files ENV_FILE=1oz_2op_deployed BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome shares basic tests:
  key: CSBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_shares_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone spaces multiuser tests:
  key: COSMT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_spaces_multiuser BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome storage sync charts:
  key: CSSC
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_storage_sync_charts BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone spaces memberships privileges data:
  key: COSMPD
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_spaces_memberships_privileges_data BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider data tab tests:
  key: CODTT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_data_tab BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome transfers directories:
  key: CTD
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_transfers_directories ENV_FILE=1oz_2op_deployed BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone basic tests:
  key: COBTT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone data discovery helpers:
  key: CODDH
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery_helpers BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome storage sync tests:
  key: CSST
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_storage_sync BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider hardlinks:
  key: COH
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_hardlinks BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone data discovery tests:
  key: CODDT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL subfiles:
  key: COASF
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_subfile BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel deployment ceph:
  key: CODC
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_deployment_ceph ENV_FILE=1oz_1op_not_deployed_embedded_ceph BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL subdirectories remove:
  key: COASD
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_subdir_remove BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL subjects:
  key: COABS
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_subjects BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone data discovery querying:
  key: CODDQ
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_data_discovery_querying BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider archives tests:
  key: COAT2
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_archives BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel ceph spaces:
  key: COCS
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_ceph_spaces ENV_FILE=1oz_1op_not_deployed_embedded_ceph BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone tokens delete:
  key: COTD
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_tokens_delete BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone groups basic tests:
  key: COGBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_groups_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone spaces basic tests:
  key: COSBT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_spaces_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel login tests:
  key: COLT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_login BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider datasets privileges:
  key: CODP
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_datasets_privileges BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone tokens tests:
  key: COTT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_tokens BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harvesters index:
  key: COHI
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_index BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harversters index metadata:
  key: COHIM
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_index_metadata BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harvesters memberships privileges:
  key: COHMP
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_memberships_privileges BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone harvesters effective privileges:
  key: COHEP
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_1op_elasticsearch SUITE=test_onezone_harvesters_effective_privileges BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel two hosts deployment tests:
  key: COTHDT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_deployment_with_2_hosts ENV_FILE=1oz_1op_not_deployed_2_nodes BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider upload tests:
  key: COUT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_upload BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone invite tokens with consumer caveats:
  key: COITWCC
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens_with_consumer_caveats BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider datasets tests:
  key: CODT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_datasets BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone invite tokens:
  key: COIT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_elasticsearch SUITE=test_onezone_invite_tokens BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome public shares tests:
  key: CPST
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_public_shares BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onezone groups multiuser tests:
  key: COGMUT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onezone_groups_multiuser BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL directories privileges:
  key: COADP
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_dir_privileges BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome multiprovider QoS storage:
  key: CMQS
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_qos_storage BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL basic:
  key: COAB
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_basic BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome multiprovider QoS tests:
  key: CMQT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_qos BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome QoS storage:
  key: CQS
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_qos_storage BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome metadata test:
  key: CMT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_metadata BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome onepanel members tests:
  key: COMT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_onepanel_members BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome multiprovider multiuser tests:
  key: CMMT
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make ENV_FILE=1oz_2op_deployed SUITE=test_multiprovider_multiuser BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
Chrome oneprovider ACL files:
  key: COAF
  other: *common-opts
  tasks:
  - script: *clear-env
  - script: *restart-minikube
  - checkout: *checkout
  - script: *init-submodules
  - script: *download-artifacts
  - script:
      <<: *run-selenium-tests
      scripts:
      - make SUITE=test_oneprovider_acl_files BROWSER=Chrome TIMEOUT=600 test_gui_src
  final-tasks:
  - test-parser: *parse-test-results
  - script: *pack-logs
  - script: *clear-env-and-working-dir
  artifacts: *artifacts
  requirements: *requirements
  artifact-subscriptions: []
